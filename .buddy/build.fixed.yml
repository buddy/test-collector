- pipeline: build
  refs:
    - refs/heads/*
  auto_clear_cache: true
  fail_on_prepare_env_warning: true
  actions:
    - action: npm run prepare:tests
      type: BUILD
      docker_image_name: library/node
      docker_image_tag: 22
      execute_commands:
        - npm ci
        - npm run build
        - npm run cleanup:tests
        - npm run prepare:tests
      shell: BASH
    - action: Publish tests package
      type: PUBLISH_PACKAGE_VERSION
      input_type: BUILD_ARTIFACTS
      local_path: /unit-tests.tgz
      package: test-collector
      versions:
        - latest
