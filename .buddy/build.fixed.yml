- pipeline: build
  refs:
  - refs/heads/master
  always_from_scratch: true
  auto_clear_cache: true
  fail_on_prepare_env_warning: true
  actions:
  - action: npm run prepare:tests
    type: BUILD
    docker_image_name: library/node
    docker_image_tag: 22
    execute_commands:
    - npm ci
    - npm run build
    - npm run cleanup:tests
    - npm run prepare:tests
    shell: BASH
  - action: Publish test-collector package
    type: PUBLISH_PACKAGE_VERSION
    input_type: BUILD_ARTIFACTS
    local_path: /unit-tests.tgz
    package: test-collector
    versions:
    - latest
  - action: Download from test-collector/l
    type: DOWNLOAD_PACKAGE_VERSION
    source_path: /unit-tests.tgz
    overwrite: true
    destination_path: /
    package: test-collector
    version: latest
